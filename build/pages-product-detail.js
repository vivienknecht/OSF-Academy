"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7],{2627:(e,t,r)=>{r.r(t),r.d(t,{default:()=>W});var a=r(4572),n=r(5861),o=r(7294),l=r(5697),i=r.n(l),c=r(4593),d=r(6896),s=r(4012),u=r(6915),m=r(7747),p=r(9653),g=r(9391),E=r(2210),f=r(1652),y=r(6933),h=r(4004),v=r(7962),b=r(9490),_=r(3410),P=r(2215),x=r(8087),O=r(4071),T=r(7334),w=r(2671);const S=({product:e})=>{const{formatMessage:t}=(0,d.Z)();return o.createElement(p.K,{direction:"row",spacing:[0,0,0,16]},o.createElement(P.U,{allowMultiple:!0,maxWidth:"896px",flex:[1,1,1,5]},o.createElement(x.Q,null,o.createElement("h2",null,o.createElement(O.K,{height:"64px"},o.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Product Detail"}],id:"product_detail.accordion.button.product_detail"})),o.createElement(T.X,null))),o.createElement(w.H,{mb:6,mt:4},o.createElement("div",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.longDescription}}))),o.createElement(x.Q,null,o.createElement("h2",null,o.createElement(O.K,{height:"64px"},o.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Size & Fit"}],id:"product_detail.accordion.button.size_fit"})),o.createElement(T.X,null))),o.createElement(w.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),o.createElement(x.Q,null,o.createElement("h2",null,o.createElement(O.K,{height:"64px"},o.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Reviews"}],id:"product_detail.accordion.button.reviews"})),o.createElement(T.X,null))),o.createElement(w.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"}))),o.createElement(x.Q,null,o.createElement("h2",null,o.createElement(O.K,{height:"64px"},o.createElement(m.xu,{flex:"1",textAlign:"left",fontWeight:"bold",fontSize:"lg"},t({defaultMessage:[{type:0,value:"Questions"}],id:"product_detail.accordion.button.questions"})),o.createElement(T.X,null))),o.createElement(w.H,{mb:6,mt:4},t({defaultMessage:[{type:0,value:"Coming Soon"}],id:"product_detail.accordion.message.coming_soon"})))),o.createElement(m.xu,{display:["none","none","none","block"],flex:4}))};S.propTypes={product:i().object};const C=S;var L=r(5666),k=r(3162),I=r(4728),D=r(6550),M=r(4813),j=r(9626);function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const A=()=>{const{formatMessage:e}=(0,d.Z)(),t=(0,D.k6)(),r=(0,D.TH)(),a=(0,h.Z)(),l=(0,M.p)(),i=(0,y.Z)(),[P,x]=(0,o.useState)({}),O=o.useRef({}),T=(0,g.useCustomerId)(),{data:w}=(0,E.Q)(),S=(0,g.useShopperBasketsMutation)("addItemToBasket"),{res:H}=(0,v.useServerContext)();H&&H.set("Cache-Control",`max-age=${k.RU}`);const A=!(null!=w&&w.basketId),{productId:W}=(0,D.UO)(),q=new URLSearchParams(r.search),{data:K,isLoading:N,isError:F,error:V}=(0,g.useProduct)({parameters:{id:q.get("pid")||W,allImages:!0}},{keepPreviousData:!0}),{data:z,isError:B,error:Q}=(0,g.useCategory)({parameters:{id:null==K?void 0:K.primaryCategoryId,level:1}});if(F){var R;const e=null==V||null===(R=V.response)||void 0===R?void 0:R.status;if(404===e)throw new L.HTTPNotFound("Product Not Found.");throw new L.HTTPError(`HTTP Error ${e} occurred.`)}if(B){var U;const e=null==Q||null===(U=Q.response)||void 0===U?void 0:U.status;if(404===e)throw new L.HTTPNotFound("Category Not Found.");throw new L.HTTPError(`HTTP Error ${e} occurred.`)}const $=null==K?void 0:K.type.set,[X,G]=(0,o.useState)(z),Y=(0,f.c1)(K);(0,o.useEffect)((()=>{z&&G(z)}),[z]),(0,o.useEffect)((()=>{if(!Y)return;const e=(0,I.DE)(`${r.pathname}${r.search}`,{pid:null==Y?void 0:Y.productId});t.replace(e)}),[Y]);const{data:J,isLoading:ee}=(0,j.L)(),te=(0,g.useShopperCustomersMutation)("createCustomerProductListItem"),re=(t,r,a)=>{te.mutate({parameters:{listId:J.id,customerId:T},body:{quantity:a,productId:(null==r?void 0:r.productId)||(null==t?void 0:t.id),public:!1,priority:1,type:"product"}},{onSuccess:()=>{l({title:e(k.Zy,{quantity:1}),status:"success",action:o.createElement(u.z,{variant:"link",onClick:()=>i("/account/wishlist")},e(k.GN))})},onError:()=>{ne()}})},ae=(0,M.p)(),ne=()=>{ae({title:e(k.oj),status:"error"})},oe=function(){var e=(0,n.Z)((function*(e){try{const t=e.map((({variant:e,quantity:t})=>({productId:e.productId,price:e.price,quantity:t})));return yield S.mutateAsync({parameters:{basketId:w.basketId},body:t}),a.sendAddToCart(t),e}catch(e){ne(e)}}));return function(t){return e.apply(this,arguments)}}(),le=(0,o.useCallback)((()=>{Object.values(O.current).forEach((({validateOrderability:e})=>{e({scrollErrorIntoView:!1})}));const e=Object.keys(P),t=K.setProducts.find((({id:t})=>!e.includes(t)));if(t){const{ref:e}=O.current[t.id];return e.scrollIntoView&&e.scrollIntoView({behavior:"smooth",block:"end"}),!1}return!0}),[K,P]);return(0,o.useEffect)((()=>{K&&K.type.set?(a.sendViewProduct(K),K.setProducts.map((e=>{a.sendViewProduct(e)}))):K&&a.sendViewProduct(K)}),[K]),o.createElement(m.xu,{className:"sf-product-detail-page",layerStyle:"page","data-testid":"product-details-page"},o.createElement(c.Helmet,null,o.createElement("title",null,null==K?void 0:K.pageTitle),o.createElement("meta",{name:"description",content:null==K?void 0:K.pageDescription})),o.createElement(p.K,{spacing:16},$?o.createElement(o.Fragment,null,o.createElement(_.Z,{product:K,category:(null==X?void 0:X.parentCategoryTree)||[],addToCart:()=>{const e=Object.values(P);return oe(e)},addToWishlist:re,isProductLoading:N,isBasketLoading:A,isWishlistLoading:ee,validateOrderability:le}),o.createElement("hr",null),K.setProducts.map((e=>o.createElement(m.xu,{key:e.id,"data-testid":"child-product"},o.createElement(_.Z,{ref:function(t){O.current[e.id]={ref:t,validateOrderability:this.validateOrderability}},product:e,isProductPartOfSet:!0,addToCart:(t,r)=>oe([{product:e,variant:t,quantity:r}]),addToWishlist:re,onVariantSelected:(e,t,r)=>{if(r)x((a=>Z(Z({},a),{},{[e.id]:{product:e,variant:t,quantity:r}})));else{const t=Z({},P);delete t[e.id],x(t)}},isProductLoading:N,isBasketLoading:A,isWishlistLoading:ee}),o.createElement(C,{product:e}),o.createElement(m.xu,{display:["none","none","none","block"]},o.createElement("hr",null)))))):o.createElement(o.Fragment,null,o.createElement(_.Z,{product:K,category:(null==X?void 0:X.parentCategoryTree)||[],addToCart:(e,t)=>oe([{product:K,variant:e,quantity:t}]),addToWishlist:re,isProductLoading:N,isBasketLoading:A,isWishlistLoading:ee}),o.createElement(C,{product:K})),o.createElement(p.K,{spacing:16},!$&&o.createElement(b.Z,{title:o.createElement(s.Z,{defaultMessage:[{type:0,value:"Complete the Set"}],id:"product_detail.recommended_products.title.complete_set"}),recommender:k.xq.PDP_COMPLETE_SET,products:[K],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==K?void 0:K.id}),o.createElement(b.Z,{title:o.createElement(s.Z,{defaultMessage:[{type:0,value:"You might also like"}],id:"product_detail.recommended_products.title.might_also_like"}),recommender:k.xq.PDP_MIGHT_ALSO_LIKE,products:[K],mx:{base:-4,md:-8,lg:0},shouldFetch:()=>null==K?void 0:K.id}),o.createElement(b.Z,{key:r.key,title:o.createElement(s.Z,{defaultMessage:[{type:0,value:"Recently Viewed"}],id:"product_detail.recommended_products.title.recently_viewed"}),recommender:k.xq.PDP_RECENTLY_VIEWED,mx:{base:-4,md:-8,lg:0}}))))};A.getTemplateName=()=>"product-detail",A.propTypes={match:i().object};const W=A}}]);