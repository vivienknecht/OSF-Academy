"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _react = require("react");
/*
 * Copyright (c) 2022, Salesforce, Inc.
 * All rights reserved.
 * SPDX-License-Identifier: BSD-3-Clause
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause
 */

/**
 * @internal
 *
 */
function useLocalStorage(key) {
  const readValue = () => {
    // TODO: Use detectLocalStorageAvailable when app can better handle clients without storage
    if (typeof window === 'undefined') {
      return null;
    }
    return window.localStorage.getItem(key);
  };
  const [storedValue, setStoredValue] = (0, _react.useState)(readValue);
  const handleStorageChange = event => {
    if (event.key !== key) {
      return;
    }
    setStoredValue(readValue());
  };
  (0, _react.useEffect)(() => {
    window.addEventListener('storage', handleStorageChange);
    return () => window.removeEventListener('storage', handleStorageChange);
  }, []);
  return storedValue;
}
var _default = useLocalStorage;
exports.default = _default;